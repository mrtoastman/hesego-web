"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const index=require("./index-9c866aeb.js"),fetch=require("./fetch-b673a242.js");require("./add-query-args-17c551b6.js");const scWordpressPasswordEditCss=":host{display:block;position:relative}",ScWordPressPasswordEdit=class{constructor(s){index.registerInstance(this,s)}renderEmpty(){return index.h("slot",{name:"empty"},wp.i18n.__("User not found.","surecart"))}async handleSubmit(s){this.loading=!0,this.error="";try{const{password:e,password_confirm:r}=await s.target.getFormJson();if(e!==r)throw{message:wp.i18n.__("Passwords do not match.","surecart")};await fetch.apiFetch({path:"wp/v2/users/me",method:"PATCH",data:{password:e,meta:{default_password_nag:!1}}}),this.successUrl?window.location.assign(this.successUrl):this.loading=!1}catch(s){this.error=(null==s?void 0:s.message)||wp.i18n.__("Something went wrong","surecart"),this.loading=!1}}render(){return index.h("sc-dashboard-module",{class:"customer-details",error:this.error},index.h("span",{slot:"heading"},this.heading||wp.i18n.__("Update Password","surecart")," "),index.h("slot",{name:"end",slot:"end"}),index.h("sc-card",null,index.h("sc-form",{onScFormSubmit:s=>this.handleSubmit(s)},index.h("sc-input",{label:wp.i18n.__("New Password","surecart"),name:"password",type:"password",required:!0}),index.h("sc-input",{label:wp.i18n.__("Confirm New Password","surecart"),name:"password_confirm",type:"password",required:!0}),index.h("div",null,index.h("sc-button",{type:"primary",full:!0,submit:!0},wp.i18n.__("Update Password","surecart"))))),this.loading&&index.h("sc-block-ui",{spinner:!0}))}};ScWordPressPasswordEdit.style=scWordpressPasswordEditCss,exports.sc_wordpress_password_edit=ScWordPressPasswordEdit;