"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const index=require("./index-9c866aeb.js"),consumer=require("./consumer-3f5ce850.js"),index$1=require("./index-cf22257b.js"),price=require("./price-d3e21aa4.js"),scLineItemsCss=":host{display:block}:slotted(*~*){margin-top:20px}.line-items{display:grid;gap:var(--sc-form-row-spacing)}.line-item{display:grid;gap:var(--sc-spacing-small)}.fee__description{opacity:0.75}",ScLineItems=class{constructor(i){index.registerInstance(this,i),this.scUpdateLineItem=index.createEvent(this,"scUpdateLineItem",7),this.scRemoveLineItem=index.createEvent(this,"scRemoveLineItem",7),this.editLineItems=!0,this.removeLineItems=!0,this.lockedChoices=[]}updateQuantity(i,e){this.scUpdateLineItem.emit({price_id:i.price.id,quantity:e})}removeLineItem(i){this.scRemoveLineItem.emit({price_id:i.price.id,quantity:1})}getName(i){var e,t,l,n,d;let o="";return o=Object.keys(this.prices||{}).filter((e=>this.prices[e].product===i.price.product.id)).length>1?`${null===(t=null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.product)||void 0===t?void 0:t.name} â€“ ${null===(l=null==i?void 0:i.price)||void 0===l?void 0:l.name}`:null===(d=null===(n=null==i?void 0:i.price)||void 0===n?void 0:n.product)||void 0===d?void 0:d.name,o}isLocked(i){return this.lockedChoices.some((e=>e.id===i.price.id))}isEditable(i){var e;return!(null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.ad_hoc)&&!(null==i?void 0:i.bump_amount)&&(null!==this.editable?this.editable:this.editLineItems)}isRemovable(){return null!==this.removable?this.removable:this.removeLineItems}render(){var i,e,t,l,n;return this.busy&&!(null===(t=null===(e=null===(i=this.order)||void 0===i?void 0:i.line_items)||void 0===e?void 0:e.data)||void 0===t?void 0:t.length)?index.h("sc-line-item",null,index.h("sc-skeleton",{style:{width:"50px",height:"50px","--border-radius":"0"},slot:"image"}),index.h("sc-skeleton",{slot:"title",style:{width:"120px",display:"inline-block"}}),index.h("sc-skeleton",{slot:"description",style:{width:"60px",display:"inline-block"}}),index.h("sc-skeleton",{style:{width:"120px",display:"inline-block"},slot:"price"}),index.h("sc-skeleton",{style:{width:"60px",display:"inline-block"},slot:"price-description"})):index.h("div",{class:"line-items"},((null===(n=null===(l=this.order)||void 0===l?void 0:l.line_items)||void 0===n?void 0:n.data)||[]).sort(((i,e)=>{var t,l,n,d;return(null===(t=i.price)||void 0===t?void 0:t.id)<(null===(l=e.price)||void 0===l?void 0:l.id)?-1:(null===(n=i.price)||void 0===n?void 0:n.id)>(null===(d=e.price)||void 0===d?void 0:d.id)?1:0})).map((i=>{var e,t,l,n,d,o,s,r,c,a;return index.h("div",{class:"line-item"},index.h("sc-product-line-item",{key:i.id,imageUrl:null===(t=null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.product)||void 0===t?void 0:t.image_url,name:null===(n=null===(l=null==i?void 0:i.price)||void 0===l?void 0:l.product)||void 0===n?void 0:n.name,max:null===(o=null===(d=null==i?void 0:i.price)||void 0===d?void 0:d.product)||void 0===o?void 0:o.purchase_limit,editable:this.isEditable(i),removable:this.isRemovable(),quantity:i.quantity,fees:null===(s=null==i?void 0:i.fees)||void 0===s?void 0:s.data,setupFeeTrialEnabled:null===(r=null==i?void 0:i.price)||void 0===r?void 0:r.setup_fee_trial_enabled,amount:null!==i.ad_hoc_amount?i.ad_hoc_amount:i.subtotal_amount,scratchAmount:null==i.ad_hoc_amount&&(null==i?void 0:i.scratch_amount),currency:null===(c=this.order)||void 0===c?void 0:c.currency,trialDurationDays:null===(a=null==i?void 0:i.price)||void 0===a?void 0:a.trial_duration_days,interval:!!(null==i?void 0:i.price)&&price.intervalString(null==i?void 0:i.price,{showOnce:index$1.hasSubscription(this.order)}),onScUpdateQuantity:e=>this.updateQuantity(i,e.detail),onScRemove:()=>this.removeLineItem(i)}))})))}};consumer.openWormhole(ScLineItems,["order","busy","prices","lockedChoices","editLineItems","removeLineItems"],!1),ScLineItems.style=scLineItemsCss,exports.sc_line_items=ScLineItems;