import{c as o}from"./p-35c4916d.js";import{g as n,b as t,a as e}from"./p-1c2e2695.js";function l(o){const e=o.indexOf("?");if(-1===e)return o;const r=n(o),s=o.substr(0,e);for(var i=arguments.length,d=new Array(i>1?i-1:0),a=1;a<i;a++)d[a-1]=arguments[a];d.forEach((t=>delete r[t]));const c=t(r);return c?s+"?"+c:s}const{state:r,onChange:d,on:i}=o({formId:null,groupId:null,mode:"live",locks:[],product:null,checkout:null,currencyCode:"usd",abandonedCheckoutReturnUrl:null,abandonedCheckoutEnabled:!0},((t,o)=>JSON.stringify(t)!==JSON.stringify(o))),c=(t,o)=>{try{return JSON.parse(t.getItem(o))}catch{return null}},u=(t,e,n,r=!1)=>{var s;const i=o(null!==(s=c(t,e))&&void 0!==s?s:n,((t,o)=>JSON.stringify(t)!==JSON.stringify(o))),d=(()=>{let o=!1;return()=>{o||(o=!0,setTimeout((()=>{t.setItem(e,JSON.stringify(i.state)),o=!1}),0))}})();return d(),r&&window.addEventListener("storage",(()=>{const o=c(t,e);if(null!==o)for(const t in o)i.set(t,o[t])})),i.use({set:d,reset:d}),i};var s;const a=(null===(s=null===window||void 0===window?void 0:window.scData)||void 0===s?void 0:s.do_not_persist_cart)?o({live:{},test:{}}):((t,o,e=!1)=>u(localStorage,"surecart-local-storage",{live:{},test:{}},e))(0,0,!0);window.scStore=a;const w=(t,o)=>{var e;return(null===(e=a.state[o])||void 0===e?void 0:e[t])||{}},v=w,m=(t,o)=>{var n;const s=(null==t?void 0:t.live_mode)?"live":"test";a.set(s,{...a.state[s],[o]:t}),r.formId===o&&r.mode===s&&(r.checkout=t),(null===(n=null===window||void 0===window?void 0:window.scData)||void 0===n?void 0:n.do_not_persist_cart)&&(null==t?void 0:t.id)&&window.history.replaceState({},document.title,e(window.location.href,{checkout_id:null==t?void 0:t.id}))},f=m,h=(t,o)=>{const{[t]:e,...n}=a.state[o];return window.history.replaceState({},document.title,l(window.location.href,"redirect_status","coupon","line_items","confirm_checkout_id","checkout_id")),a.set(o,n)},k=h;d("checkout",(t=>f(t,r.formId))),i("get",(t=>{if("checkout"===t){const t=v(r.formId,r.mode);(null==t?void 0:t.id)&&(r.checkout=t)}}));export{r as a,v as b,h as c,i as d,k as e,w as g,d as o,l as r,m as s};