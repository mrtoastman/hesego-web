import{r as registerInstance,c as createEvent,h}from"./index-fd4790f6.js";import{o as openWormhole}from"./consumer-b5087188.js";import{h as hasSubscription}from"./index-1ef9aa85.js";import{i as intervalString}from"./price-a4ea8b5f.js";const scLineItemsCss=":host{display:block}:slotted(*~*){margin-top:20px}.line-items{display:grid;gap:var(--sc-form-row-spacing)}.line-item{display:grid;gap:var(--sc-spacing-small)}.fee__description{opacity:0.75}",ScLineItems=class{constructor(i){registerInstance(this,i),this.scUpdateLineItem=createEvent(this,"scUpdateLineItem",7),this.scRemoveLineItem=createEvent(this,"scRemoveLineItem",7),this.editLineItems=!0,this.removeLineItems=!0,this.lockedChoices=[]}updateQuantity(i,e){this.scUpdateLineItem.emit({price_id:i.price.id,quantity:e})}removeLineItem(i){this.scRemoveLineItem.emit({price_id:i.price.id,quantity:1})}getName(i){var e,t,l,o,s;let n="";return n=Object.keys(this.prices||{}).filter((e=>this.prices[e].product===i.price.product.id)).length>1?`${null===(t=null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.product)||void 0===t?void 0:t.name} â€“ ${null===(l=null==i?void 0:i.price)||void 0===l?void 0:l.name}`:null===(s=null===(o=null==i?void 0:i.price)||void 0===o?void 0:o.product)||void 0===s?void 0:s.name,n}isLocked(i){return this.lockedChoices.some((e=>e.id===i.price.id))}isEditable(i){var e;return!(null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.ad_hoc)&&!(null==i?void 0:i.bump_amount)&&(null!==this.editable?this.editable:this.editLineItems)}isRemovable(){return null!==this.removable?this.removable:this.removeLineItems}render(){var i,e,t,l,o;return this.busy&&!(null===(t=null===(e=null===(i=this.order)||void 0===i?void 0:i.line_items)||void 0===e?void 0:e.data)||void 0===t?void 0:t.length)?h("sc-line-item",null,h("sc-skeleton",{style:{width:"50px",height:"50px","--border-radius":"0"},slot:"image"}),h("sc-skeleton",{slot:"title",style:{width:"120px",display:"inline-block"}}),h("sc-skeleton",{slot:"description",style:{width:"60px",display:"inline-block"}}),h("sc-skeleton",{style:{width:"120px",display:"inline-block"},slot:"price"}),h("sc-skeleton",{style:{width:"60px",display:"inline-block"},slot:"price-description"})):h("div",{class:"line-items"},((null===(o=null===(l=this.order)||void 0===l?void 0:l.line_items)||void 0===o?void 0:o.data)||[]).sort(((i,e)=>{var t,l,o,s;return(null===(t=i.price)||void 0===t?void 0:t.id)<(null===(l=e.price)||void 0===l?void 0:l.id)?-1:(null===(o=i.price)||void 0===o?void 0:o.id)>(null===(s=e.price)||void 0===s?void 0:s.id)?1:0})).map((i=>{var e,t,l,o,s,n,d,r,a,c;return h("div",{class:"line-item"},h("sc-product-line-item",{key:i.id,imageUrl:null===(t=null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.product)||void 0===t?void 0:t.image_url,name:null===(o=null===(l=null==i?void 0:i.price)||void 0===l?void 0:l.product)||void 0===o?void 0:o.name,max:null===(n=null===(s=null==i?void 0:i.price)||void 0===s?void 0:s.product)||void 0===n?void 0:n.purchase_limit,editable:this.isEditable(i),removable:this.isRemovable(),quantity:i.quantity,fees:null===(d=null==i?void 0:i.fees)||void 0===d?void 0:d.data,setupFeeTrialEnabled:null===(r=null==i?void 0:i.price)||void 0===r?void 0:r.setup_fee_trial_enabled,amount:null!==i.ad_hoc_amount?i.ad_hoc_amount:i.subtotal_amount,scratchAmount:null==i.ad_hoc_amount&&(null==i?void 0:i.scratch_amount),currency:null===(a=this.order)||void 0===a?void 0:a.currency,trialDurationDays:null===(c=null==i?void 0:i.price)||void 0===c?void 0:c.trial_duration_days,interval:!!(null==i?void 0:i.price)&&intervalString(null==i?void 0:i.price,{showOnce:hasSubscription(this.order)}),onScUpdateQuantity:e=>this.updateQuantity(i,e.detail),onScRemove:()=>this.removeLineItem(i)}))})))}};openWormhole(ScLineItems,["order","busy","prices","lockedChoices","editLineItems","removeLineItems"],!1),ScLineItems.style=scLineItemsCss;export{ScLineItems as sc_line_items};