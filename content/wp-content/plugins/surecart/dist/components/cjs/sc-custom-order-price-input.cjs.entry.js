"use strict";Object.defineProperty(exports,"__esModule",{value:!0});const index=require("./index-9c866aeb.js"),fetch=require("./fetch-b673a242.js"),consumer=require("./consumer-3f5ce850.js");require("./add-query-args-17c551b6.js");const scCustomOrderPriceInputCss="sc-custom-order-price-input{display:block}",ScCustomOrderPriceInput=class{constructor(e){index.registerInstance(this,e),this.scUpdateLineItem=index.createEvent(this,"scUpdateLineItem",7),this.loading=!1,this.busy=!1,this.lineItems=[],this.fetching=!1}handleBlur(e){var i;const t=parseInt(e.target.value);isNaN(t)||(null===(i=this.lineItem)||void 0===i?void 0:i.ad_hoc_amount)!==t&&this.scUpdateLineItem.emit({price_id:this.priceId,quantity:1,ad_hoc_amount:t})}handleLineItemsChange(){var e;(null===(e=this.lineItems)||void 0===e?void 0:e.length)&&(this.lineItem=(this.lineItems||[]).find((e=>e.price.id===this.priceId)))}componentDidLoad(){this.price||this.fetchPrice()}async fetchPrice(){if(this.priceId)try{this.fetching=!0,this.price=await fetch.apiFetch({path:`surecart/v1/prices/${this.priceId}`})}catch(e){}finally{this.fetching=!1}}renderEmpty(){var e;return(null===(e=null===window||void 0===window?void 0:window.wp)||void 0===e?void 0:e.blocks)?index.h("sc-alert",{type:"danger",open:!0,style:{margin:"0px"}},wp.i18n.__("This price has been archived.","surecart")):index.h(index.Host,{style:{display:"none"}})}render(){var e,i,t,s,n,r;return this.loading||this.fetching?index.h("div",null,index.h("sc-skeleton",{style:{width:"20%",marginBottom:"0.75em"}}),index.h("sc-skeleton",{style:{width:"100%"}})):!(null===(e=null==this?void 0:this.price)||void 0===e?void 0:e.id)||(null===(i=this.price)||void 0===i?void 0:i.archived)?this.renderEmpty():index.h("div",{class:"sc-custom-order-price-input"},index.h("sc-price-input",{"currency-code":(null===(t=this.price)||void 0===t?void 0:t.currency)||"usd",label:this.label,min:null===(s=null==this?void 0:this.price)||void 0===s?void 0:s.ad_hoc_min_amount,max:null===(n=null==this?void 0:this.price)||void 0===n?void 0:n.ad_hoc_max_amount,placeholder:this.placeholder,required:this.required,value:null===(r=this.lineItem)||void 0===r?void 0:r.ad_hoc_amount.toString(),"show-code":this.showCode,help:this.help}),this.busy&&index.h("sc-block-ui",{style:{zIndex:"9"}}))}static get watchers(){return{lineItems:["handleLineItemsChange"]}}};consumer.openWormhole(ScCustomOrderPriceInput,["busy","lineItems"],!1),ScCustomOrderPriceInput.style=scCustomOrderPriceInputCss,exports.sc_custom_order_price_input=ScCustomOrderPriceInput;