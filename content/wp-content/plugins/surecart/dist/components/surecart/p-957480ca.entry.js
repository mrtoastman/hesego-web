import{r as o,c as s,h as t,F as e}from"./p-dfbe004d.js";import{s as l}from"./p-ea78c070.js";import"./p-47d251a3.js";import{s as r,c as i,d as a,b as n}from"./p-0bb69f38.js";import{d as c,a as d}from"./p-10aa7556.js";import{a as u}from"./p-f56cd460.js";import{l as m,u as p}from"./p-30ecac60.js";import{a as h}from"./p-d8453138.js";import{M as v}from"./p-6f48b449.js";import{a as y}from"./p-1c2e2695.js";import"./p-35c4916d.js";import"./p-9b6c2663.js";const f=class{constructor(t){o(this,t),this.scError=s(this,"scError",7)}componentWillLoad(){var t,e;l.id="mollie",this.fetchMethods(),t=["total_amount","currency","reusabled_payment_method_required","shipping_address"],e=()=>this.fetchMethods(),c("set",((o,s,r)=>{if("checkout"===o){if(Array.isArray(t)&&t.some((t=>JSON.stringify(null==s?void 0:s[t])!==JSON.stringify(null==r?void 0:r[t]))))return e();if("string"==typeof t){if(JSON.stringify(null==s?void 0:s[t])===JSON.stringify(null==r?void 0:r[t]))return;return e()}}}))}async fetchMethods(){var t;const e=d.checkout;if((null==e?void 0:e.currency)&&(null==e?void 0:e.total_amount))try{m("methods");const o=await h({path:y(`surecart/v1/processors/${this.processorId}/payment_method_types`,{amount:null==e?void 0:e.total_amount,country:(null===(t=null==e?void 0:e.shipping_address)||void 0===t?void 0:t.country)||"us",currency:null==e?void 0:e.currency,...(null==e?void 0:e.reusable_payment_method_required)?{reusable:null==e?void 0:e.reusable_payment_method_required}:{},per_page:100})});r.methods=(null==o?void 0:o.data)||[]}catch(t){this.scError.emit(t),console.error(t)}finally{p("methods")}}renderLoading(){return t("sc-card",null,t("sc-skeleton",{style:{width:"50%",marginBottom:"0.5em"}}),t("sc-skeleton",{style:{width:"30%",marginBottom:"0.5em"}}),t("sc-skeleton",{style:{width:"60%",marginBottom:"0.5em"}}))}render(){var o,s,r;if(u("methods")&&!(null===(o=i())||void 0===o?void 0:o.length))return this.renderLoading();if(!(null===(s=d.checkout)||void 0===s?void 0:s.currency))return this.renderLoading();if(!(null===(r=i())||void 0===r?void 0:r.length))return t("sc-alert",{type:"warning",open:!0},wp.i18n.__("No available payment methods","surecart")," ");const l=a()?"sc-toggles":"div";return t(e,null,t(l,{collapsible:!1,theme:"container"},(i()||[]).map((e=>t("sc-payment-method-choice",{"processor-id":"mollie","method-id":null==e?void 0:e.id,key:null==e?void 0:e.id},t("span",{slot:"summary",class:"sc-payment-toggle-summary"},!!(null==e?void 0:e.image)&&t("img",{src:null==e?void 0:e.image}),t("span",null,null==e?void 0:e.description)),t("sc-card",null,t("sc-payment-selected",{label:wp.i18n.sprintf(wp.i18n.__("%s selected for check out.","surecart"),null==e?void 0:e.description)},!!(null==e?void 0:e.image)&&t("img",{slot:"icon",src:null==e?void 0:e.image,style:{width:"32px"}}),wp.i18n.__("Another step will appear after submitting your order to complete your purchase details.","surecart")))))),t(v,{methods:n()})),!!u("methods")&&t("sc-block-ui",{class:"busy-block-ui","z-index":9,style:{"--sc-block-ui-opacity":"0.4"}}))}};f.style=":host{display:block}";export{f as sc_checkout_mollie_payment};