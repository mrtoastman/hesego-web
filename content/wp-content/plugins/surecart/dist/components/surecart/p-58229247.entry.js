import{r as s,c as t,h as i,H as o}from"./p-dfbe004d.js";import{o as a}from"./p-d63f2554.js";import{c as e}from"./p-ec9ca067.js";import"./p-10aa7556.js";import"./p-35c4916d.js";import"./p-1c2e2695.js";import"./p-47d251a3.js";import"./p-ea78c070.js";import"./p-0bb69f38.js";import"./p-9b6c2663.js";import"./p-d8453138.js";import"./p-4d73f82a.js";const r=class{constructor(i){s(this,i),this.scChange=t(this,"scChange",7),this.scClear=t(this,"scClear",7),this.scInput=t(this,"scInput",7),this.scFocus=t(this,"scFocus",7),this.scBlur=t(this,"scBlur",7),this.scUpdateOrderState=t(this,"scUpdateOrderState",7),this.scUpdateAbandonedCart=t(this,"scUpdateAbandonedCart",7),this.scLoginPrompt=t(this,"scLoginPrompt",7),this.size="medium",this.value="",this.pill=!1,this.showLabel=!0,this.help="",this.disabled=!1,this.readonly=!1,this.required=!1,this.invalid=!1}async handleChange(){var t;this.value=this.input.value,this.scChange.emit();try{const s=await e({id:null===(t=this.order)||void 0===t?void 0:t.id,data:{email:this.input.value}});this.scUpdateOrderState.emit(s)}catch(t){console.error(t)}}handleSessionChange(t){(null==t?void 0:t.email)&&t.email!==this.value&&(this.value=t.email)}async reportValidity(){var t,s;return null===(s=null===(t=this.input)||void 0===t?void 0:t.reportValidity)||void 0===s?void 0:s.call(t)}renderOptIn(){return this.trackingConfirmationMessage?!1!==this.abandonedCheckoutEnabled?i("div",{class:"tracking-confirmation-message"},i("span",null,this.trackingConfirmationMessage)," ",i("a",{href:"#",onClick:t=>{t.preventDefault(),this.scUpdateAbandonedCart.emit(!1)}},wp.i18n.__("No Thanks","surecart"))):i("div",{class:"tracking-confirmation-message"},i("span",null," ",wp.i18n.__("You won't receive further emails from us.","surecart"))):null}render(){var t;return i(o,null,i("sc-input",{exportparts:"base, input, form-control, label, help-text, prefix, suffix",type:"email",name:"email",ref:t=>this.input=t,value:(null===(t=this.customer)||void 0===t?void 0:t.email)||this.value,help:this.help,label:this.label,autocomplete:"email",placeholder:this.placeholder,disabled:!!this.loggedIn,readonly:this.readonly,required:!0,invalid:this.invalid,autofocus:this.autofocus,hasFocus:this.hasFocus,onScChange:()=>this.handleChange(),onScInput:()=>this.scInput.emit(),onScFocus:()=>this.scFocus.emit(),onScBlur:()=>this.scBlur.emit()}),this.renderOptIn())}static get watchers(){return{order:["handleSessionChange"]}}};a(r,["order","customer","loggedIn","abandonedCheckoutEnabled"],!1),r.style=":host{display:block}a{color:var(--sc-color-primary-500)}a.customer-email__login-link{color:var(--sc-customer-login-link-color, var(--sc-input-placeholder-color));text-decoration:none;font-size:var(--sc-font-size-small)}.tracking-confirmation-message{font-size:var(--sc-font-size-xx-small)}.tracking-confirmation-message span{opacity:0.75}";export{r as sc_customer_email};