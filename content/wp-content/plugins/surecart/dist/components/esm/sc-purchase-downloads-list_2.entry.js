import{r as registerInstance,h,F as Fragment,g as getElement,H as Host}from"./index-fd4790f6.js";import{a as addQueryArgs}from"./add-query-args-f4c5962b.js";const scPurchaseDownloadsListCss=":host{display:block}.download__details{opacity:0.75}",ScPurchaseDownloadsList=class{constructor(s){registerInstance(this,s),this.purchases=[]}renderEmpty(){return h("div",null,h("sc-divider",{style:{"--spacing":"0"}}),h("slot",{name:"empty"},h("sc-empty",{icon:"download"},wp.i18n.__("You don't have any downloads.","surecart"))))}renderLoading(){return h("sc-card",{"no-padding":!0,style:{"--overflow":"hidden"}},h("sc-stacked-list",null,h("sc-stacked-list-row",{style:{"--columns":"2"},"mobile-size":0},h("div",{style:{padding:"0.5em"}},h("sc-skeleton",{style:{width:"30%",marginBottom:"0.75em"}}),h("sc-skeleton",{style:{width:"20%"}})))))}renderList(){return this.purchases.map((s=>{var e,n,t;const i=null===(n=null===(e=null==s?void 0:s.product)||void 0===e?void 0:e.downloads)||void 0===n?void 0:n.data.filter((s=>!s.archived)),l=(i||[]).map((s=>{var e;return(null==s?void 0:s.media)?null===(e=null==s?void 0:s.media)||void 0===e?void 0:e.byte_size:0})),o=l.reduce(((s,e)=>s+e),0);return h("sc-stacked-list-row",{href:(null==s?void 0:s.revoked)?null:addQueryArgs(window.location.href,{action:"show",model:"download",id:s.id,nonce:this.requestNonce}),key:s.id,"mobile-size":0},h("sc-spacing",{style:{"--spacing":"var(--sc-spacing-xx--small)"}},h("div",null,h("strong",null,null===(t=null==s?void 0:s.product)||void 0===t?void 0:t.name)),h("div",{class:"download__details"},wp.i18n.sprintf(wp.i18n._n("%s file","%s files",null==i?void 0:i.length,"surecart"),null==i?void 0:i.length),!!o&&h(Fragment,null," ","â€¢ ",h("sc-format-bytes",{value:o})))),h("sc-icon",{name:"chevron-right",slot:"suffix"}))}))}renderContent(){var s;return this.loading?this.renderLoading():0===(null===(s=this.purchases)||void 0===s?void 0:s.length)?this.renderEmpty():h("sc-card",{"no-padding":!0,style:{"--overflow":"hidden"}},h("sc-stacked-list",null,this.renderList()))}render(){return h("sc-dashboard-module",{class:"downloads-list",error:this.error},h("span",{slot:"heading"},h("slot",{name:"heading"},this.heading||wp.i18n.__("Items","surecart"))),h("slot",{name:"before"}),!!this.allLink&&h("sc-button",{type:"link",href:this.allLink,slot:"end"},wp.i18n.__("View all","surecart"),h("sc-icon",{name:"chevron-right",slot:"suffix"})),this.renderContent(),h("slot",{name:"after"}),this.busy&&h("sc-block-ui",null))}get el(){return getElement(this)}};ScPurchaseDownloadsList.style=scPurchaseDownloadsListCss;const scSpacingCss=":host{display:block}::slotted(*:not(:last-child)){margin-bottom:var(--spacing)}",ScSpacing=class{constructor(s){registerInstance(this,s)}render(){return h(Host,null,h("slot",null))}};ScSpacing.style=scSpacingCss;export{ScPurchaseDownloadsList as sc_purchase_downloads_list,ScSpacing as sc_spacing};