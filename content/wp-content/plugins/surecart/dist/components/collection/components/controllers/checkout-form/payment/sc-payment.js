import{Component,Element,Fragment,h,Host,Prop}from"@stencil/core";import{__}from"@wordpress/i18n";import{state as checkoutState}from"@store/checkout";import{state as processorsState}from"@store/processors";import{state as selectedProcessor}from"@store/selected-processor";import{ManualPaymentMethods}from"./ManualPaymentMethods";import{getAvailableProcessor,hasMultipleProcessorChoices,availableManualPaymentMethods,availableProcessors}from"@store/processors/getters";export class ScPayment{componentWillLoad(){processorsState.disabled.processors=this.disabledProcessorTypes}renderStripe(e){return h("sc-payment-method-choice",{key:null==e?void 0:e.id,"processor-id":"stripe",card:this.stripePaymentElement},h("span",{slot:"summary",class:"sc-payment-toggle-summary"},h("sc-icon",{name:"credit-card",style:{fontSize:"24px"}}),h("span",null,__("Credit Card","surecart"))),h("div",{class:"sc-payment__stripe-card-element"},h("slot",{name:"stripe"})))}renderPayPal(e){const t=getAvailableProcessor("stripe");return h(Fragment,null,h("sc-payment-method-choice",{key:null==e?void 0:e.id,"processor-id":"paypal"},h("span",{slot:"summary",class:"sc-payment-toggle-summary"},h("sc-icon",{name:"paypal",style:{width:"80px",fontSize:"24px"}})),h("sc-card",null,h("sc-payment-selected",{label:__("PayPal selected for check out.","surecart")},h("sc-icon",{slot:"icon",name:"paypal",style:{width:"80px"}}),__("Another step will appear after submitting your order to complete your purchase details.","surecart")))),!t&&h("sc-payment-method-choice",{key:null==e?void 0:e.id,"processor-id":"paypal","method-id":"card"},h("span",{slot:"summary",class:"sc-payment-toggle-summary"},h("sc-icon",{name:"credit-card",style:{fontSize:"24px"}}),h("span",null,__("Credit Card","surecart"))),h("sc-card",null,h("sc-payment-selected",{label:__("Credit Card selected for check out.","surecart")},h("sc-icon",{name:"credit-card",slot:"icon",style:{fontSize:"24px"}}),__("Another step will appear after submitting your order to complete your purchase details.","surecart")))))}render(){var e,t;if(!1===(null===(e=checkoutState.checkout)||void 0===e?void 0:e.payment_method_required))return null;const s=hasMultipleProcessorChoices()||"paypal"===(null==selectedProcessor?void 0:selectedProcessor.id)?"sc-toggles":"div",r=getAvailableProcessor("mollie");return h(Host,null,h("sc-form-control",{label:this.label,exportparts:"label, help-text, form-control"},h("div",{class:"sc-payment-label",slot:"label"},h("div",null,this.label),"test"===checkoutState.mode&&!this.hideTestModeBadge&&h("sc-tag",{type:"warning",size:"small",exportparts:"base:test-badge__base, content:test-badge__content"},__("Test Mode","surecart"))),(null==r?void 0:r.id)?h("sc-checkout-mollie-payment",{"processor-id":null==r?void 0:r.id}):h(s,{collapsible:!1,theme:"container"},!(null===(t=availableProcessors())||void 0===t?void 0:t.length)&&h("sc-alert",{type:"info",open:!0},__("You do not have any processors enabled for this mode and cart. Please configure your processors.","surecart")),(availableProcessors()||[]).map((e=>{switch(null==e?void 0:e.processor_type){case"stripe":return this.renderStripe(e);case"paypal":return this.renderPayPal(e)}})),h(ManualPaymentMethods,{methods:availableManualPaymentMethods()}))))}static get is(){return"sc-payment"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-payment.scss"]}}static get styleUrls(){return{$:["sc-payment.css"]}}static get properties(){return{stripePaymentElement:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"stripe-payment-element",reflect:!1},disabledProcessorTypes:{type:"unknown",mutable:!1,complexType:{original:"string[]",resolved:"string[]",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Disabled processor types"}},secureNotice:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"secure-notice",reflect:!1},label:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:"The input's label."},attribute:"label",reflect:!1},hideTestModeBadge:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:"Hide the test mode badge"},attribute:"hide-test-mode-badge",reflect:!1}}}static get elementRef(){return"el"}}