import{g as n,a as o}from"./p-dfbe004d.js";var r=new Map,t=function(e,t){var n=e.updater;e.fields.forEach((function(e){n(e,t[e])}))},f={create:function(e,a){var o=n(e),c=new Map,l={wormholes:c,state:a};r.set(e,l);var d=e.connectedCallback;e.connectedCallback=function(){r.set(e,l),d&&d.call(e)};var i=e.disconnectedCallback;e.disconnectedCallback=function(){r.delete(e),i&&i.call(e)},o.addEventListener("openWormhole",(function(e){e.stopPropagation();var n=e.detail,a=n.consumer,o=n.onOpen;if(!c.has(a)){if("symbol"!=typeof a){var r=a.connectedCallback,d=a.disconnectedCallback;a.connectedCallback=function(){c.set(a,e.detail),r&&r.call(a)},a.disconnectedCallback=function(){c.delete(a),d&&d.call(a)}}c.set(a,e.detail),t(e.detail,l.state),null==o||o.resolve((function(){c.delete(a)}))}})),o.addEventListener("closeWormhole",(function(e){c.delete(e.detail)}))},Provider:function(e,n){var a=e.state,c=o();if(r.has(c)){var l=r.get(c);l.state=a,l.wormholes.forEach((function(e){t(e,a)}))}return n}};export{f as U};