var _a;import{createLocalStore}from"./local";import{createStore}from"@stencil/store";import{state as checkoutState}from"@store/checkout";import{addQueryArgs,removeQueryArgs}from"@wordpress/url";const store=(null===(_a=null===window||void 0===window?void 0:window.scData)||void 0===_a?void 0:_a.do_not_persist_cart)?createStore({live:{},test:{}}):createLocalStore("surecart-local-storage",{live:{},test:{}},!0);window.scStore=store;export default store;export const getOrder=(t,e)=>{var o;return(null===(o=store.state[e])||void 0===o?void 0:o[t])||{}};export const getCheckout=getOrder;export const setOrder=(t,e)=>{var o;const r=(null==t?void 0:t.live_mode)?"live":"test";store.set(r,{...store.state[r],[e]:t}),checkoutState.formId===e&&checkoutState.mode===r&&(checkoutState.checkout=t),(null===(o=null===window||void 0===window?void 0:window.scData)||void 0===o?void 0:o.do_not_persist_cart)&&(null==t?void 0:t.id)&&window.history.replaceState({},document.title,addQueryArgs(window.location.href,{checkout_id:null==t?void 0:t.id}))};export const setCheckout=setOrder;export const clearOrder=(t,e)=>{const{[t]:o,...r}=store.state[e];return window.history.replaceState({},document.title,removeQueryArgs(window.location.href,"redirect_status","coupon","line_items","confirm_checkout_id","checkout_id")),store.set(e,r)};export const clearCheckout=clearOrder;