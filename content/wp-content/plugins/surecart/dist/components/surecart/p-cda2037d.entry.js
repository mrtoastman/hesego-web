import{r as e,c as i,h as t,F as s,H as r}from"./p-dfbe004d.js";import{i as c}from"./p-468023a1.js";import{g as l}from"./p-f56cd460.js";import{f as o}from"./p-a447ac09.js";import{o as a}from"./p-10aa7556.js";import"./p-75c9e181.js";import"./p-35c4916d.js";import"./p-1c2e2695.js";const n=class{constructor(t){e(this,t),this.scUpdateLineItem=i(this,"scUpdateLineItem",7)}lineItem(){return l(this.productId)}componentWillLoad(){a("checkout",(()=>{var t,e,i;this.adHocAmount=(null===(t=this.lineItem())||void 0===t?void 0:t.ad_hoc_amount)||(null===(i=null===(e=this.lineItem())||void 0===e?void 0:e.price)||void 0===i?void 0:i.amount)}))}updatePrice(){var t,e,i;this.showInput=!1,(this.adHocAmount||0===this.adHocAmount)&&this.adHocAmount!==(null===(t=this.lineItem())||void 0===t?void 0:t.ad_hoc_amount)&&this.scUpdateLineItem.emit({price_id:null===(i=null===(e=this.lineItem())||void 0===e?void 0:e.price)||void 0===i?void 0:i.id,quantity:1,ad_hoc_amount:this.adHocAmount})}handleShowInputChange(t){t&&setTimeout((()=>{this.input.triggerFocus()}),50)}render(){var e,i,a,n,l;const p=null===(e=this.lineItem())||void 0===e?void 0:e.price;return p?t("div",{class:{"selected-price":!0}},this.showInput?t("sc-form",{onScSubmit:t=>{t.preventDefault(),t.stopImmediatePropagation(),this.updatePrice()},onScFormSubmit:t=>{t.preventDefault(),t.stopImmediatePropagation()}},t("sc-price-input",{ref:t=>this.input=t,size:"large","currency-code":(null==p?void 0:p.currency)||"usd",min:null==p?void 0:p.ad_hoc_min_amount,max:null==p?void 0:p.ad_hoc_max_amount,placeholder:"0.00",required:!0,value:null===(a=null===(i=this.adHocAmount)||void 0===i?void 0:i.toString)||void 0===a?void 0:a.call(i),onScInput:t=>this.adHocAmount=parseInt(t.target.value)},t("sc-button",{slot:"suffix",type:"link",submit:!0},wp.i18n.__("Update","surecart")))):t(s,null,t("div",{class:"selected-price__wrap"},t("span",{class:"selected-price__price"},(null==p?void 0:p.scratch_amount)>p.amount&&t(s,null,t("sc-format-number",{class:"selected-price__scratch-price",part:"price__scratch",type:"currency",currency:null==p?void 0:p.currency,value:null==p?void 0:p.scratch_amount})," "),t("sc-format-number",{type:"currency",currency:null==p?void 0:p.currency,value:null!==(null===(n=this.lineItem())||void 0===n?void 0:n.ad_hoc_amount)?null===(l=this.lineItem())||void 0===l?void 0:l.ad_hoc_amount:null==p?void 0:p.amount})),t("span",{class:"selected-price__interval"},c(p,{labels:{interval:"/",period:wp.i18n.__("for","surecart")}}))),(null==p?void 0:p.ad_hoc)&&!o()&&t("sc-button",{class:"selected-price__change-amount",type:"primary",size:"small",onClick:()=>this.showInput=!0},t("sc-icon",{name:"edit",slot:"prefix"}),wp.i18n.__("Change Amount","surecart")))):t(r,{style:{display:"none"}})}static get watchers(){return{showInput:["handleShowInputChange"]}}};n.style=":host{display:block}sc-form{width:100%}.selected-price{display:flex;align-items:center;gap:var(--sc-spacing-small);flex-wrap:wrap}.selected-price__wrap{display:flex;align-items:baseline;flex-wrap:wrap;gap:var(--sc-spacing-xx-small);color:var(--sc-selected-price-color, var(--sc-color-gray-800));line-height:1}.selected-price__price{font-size:var(--sc-font-size-xxx-large);font-weight:var(--sc-font-weight-bold);white-space:nowrap}.selected-price__interval{font-weight:var(--sc-font-weight-bold);opacity:0.65;white-space:nowrap}.selected-price__scratch-price{opacity:0.65;font-weight:var(--sc-font-weight-normal);text-decoration:line-through}";export{n as sc_product_selected_price};