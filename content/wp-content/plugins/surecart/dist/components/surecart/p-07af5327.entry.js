import{r as i,c as l,h as o}from"./p-dfbe004d.js";import{o as t}from"./p-d63f2554.js";import{h as e}from"./p-afcbd440.js";import{i as s}from"./p-468023a1.js";const d=class{constructor(e){i(this,e),this.scUpdateLineItem=l(this,"scUpdateLineItem",7),this.scRemoveLineItem=l(this,"scRemoveLineItem",7),this.editLineItems=!0,this.removeLineItems=!0,this.lockedChoices=[]}updateQuantity(i,e){this.scUpdateLineItem.emit({price_id:i.price.id,quantity:e})}removeLineItem(i){this.scRemoveLineItem.emit({price_id:i.price.id,quantity:1})}getName(i){var e,t,l,o,d;let s="";return s=Object.keys(this.prices||{}).filter((e=>this.prices[e].product===i.price.product.id)).length>1?`${null===(t=null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.product)||void 0===t?void 0:t.name} â€“ ${null===(l=null==i?void 0:i.price)||void 0===l?void 0:l.name}`:null===(d=null===(o=null==i?void 0:i.price)||void 0===o?void 0:o.product)||void 0===d?void 0:d.name,s}isLocked(i){return this.lockedChoices.some((e=>e.id===i.price.id))}isEditable(i){var e;return!(null===(e=null==i?void 0:i.price)||void 0===e?void 0:e.ad_hoc)&&!(null==i?void 0:i.bump_amount)&&(null!==this.editable?this.editable:this.editLineItems)}isRemovable(){return null!==this.removable?this.removable:this.removeLineItems}render(){var i,t,l,d,n;return this.busy&&!(null===(l=null===(t=null===(i=this.order)||void 0===i?void 0:i.line_items)||void 0===t?void 0:t.data)||void 0===l?void 0:l.length)?o("sc-line-item",null,o("sc-skeleton",{style:{width:"50px",height:"50px","--border-radius":"0"},slot:"image"}),o("sc-skeleton",{slot:"title",style:{width:"120px",display:"inline-block"}}),o("sc-skeleton",{slot:"description",style:{width:"60px",display:"inline-block"}}),o("sc-skeleton",{style:{width:"120px",display:"inline-block"},slot:"price"}),o("sc-skeleton",{style:{width:"60px",display:"inline-block"},slot:"price-description"})):o("div",{class:"line-items"},((null===(n=null===(d=this.order)||void 0===d?void 0:d.line_items)||void 0===n?void 0:n.data)||[]).sort(((i,e)=>{var t,l,o,d;return(null===(t=i.price)||void 0===t?void 0:t.id)<(null===(l=e.price)||void 0===l?void 0:l.id)?-1:(null===(o=i.price)||void 0===o?void 0:o.id)>(null===(d=e.price)||void 0===d?void 0:d.id)?1:0})).map((i=>{var t,l,d,n,r,a,c,u,v,p;return o("div",{class:"line-item"},o("sc-product-line-item",{key:i.id,imageUrl:null===(l=null===(t=null==i?void 0:i.price)||void 0===t?void 0:t.product)||void 0===l?void 0:l.image_url,name:null===(n=null===(d=null==i?void 0:i.price)||void 0===d?void 0:d.product)||void 0===n?void 0:n.name,max:null===(a=null===(r=null==i?void 0:i.price)||void 0===r?void 0:r.product)||void 0===a?void 0:a.purchase_limit,editable:this.isEditable(i),removable:this.isRemovable(),quantity:i.quantity,fees:null===(c=null==i?void 0:i.fees)||void 0===c?void 0:c.data,setupFeeTrialEnabled:null===(u=null==i?void 0:i.price)||void 0===u?void 0:u.setup_fee_trial_enabled,amount:null!==i.ad_hoc_amount?i.ad_hoc_amount:i.subtotal_amount,scratchAmount:null==i.ad_hoc_amount&&(null==i?void 0:i.scratch_amount),currency:null===(v=this.order)||void 0===v?void 0:v.currency,trialDurationDays:null===(p=null==i?void 0:i.price)||void 0===p?void 0:p.trial_duration_days,interval:!!(null==i?void 0:i.price)&&s(null==i?void 0:i.price,{showOnce:e(this.order)}),onScUpdateQuantity:e=>this.updateQuantity(i,e.detail),onScRemove:()=>this.removeLineItem(i)}))})))}};t(d,["order","busy","prices","lockedChoices","editLineItems","removeLineItems"],!1),d.style=":host{display:block}:slotted(*~*){margin-top:20px}.line-items{display:grid;gap:var(--sc-form-row-spacing)}.line-item{display:grid;gap:var(--sc-spacing-small)}.fee__description{opacity:0.75}";export{d as sc_line_items};