import{r as registerInstance,h,H as Host}from"./index-fd4790f6.js";import{s as state}from"./watchers-e86a5dda.js";import{c as currentCheckout}from"./getters-edc6a0db.js";import"./index-26bbcef3.js";import"./watchers-0c79cf4e.js";import"./add-query-args-f4c5962b.js";const hasAnyRuleGroupPassed=(e,r)=>(e||[]).some((({rules:e})=>hasRulesPassed(e,r))),hasRulesPassed=(e,{checkout:r,processor:o})=>e.map((e=>{var t,s;const l=Array.isArray(null==e?void 0:e.value)?(null==e?void 0:e.value).map((e=>(null==e?void 0:e.value)||e)):null==e?void 0:e.value;switch(null==e?void 0:e.condition){case"total":return compareNumberValues(parseFloat(r.total_amount),parseFloat(l),null==e?void 0:e.operator);case"products":return compareObjectValues(getCartProductIds(r),l,null==e?void 0:e.operator);case"coupons":return compareObjectValues(getCartCouponIds(r),l,null==e?void 0:e.operator);case"shipping_country":return compareObjectValues([null===(t=null==r?void 0:r.shipping_address)||void 0===t?void 0:t.country],l,null==e?void 0:e.operator);case"billing_country":return compareObjectValues([null===(s=null==r?void 0:r.billing_address)||void 0===s?void 0:s.country],l,null==e?void 0:e.operator);case"processors":return compareObjectValues([o],l,null==e?void 0:e.operator);default:return!1}})).every((e=>e)),getCartProductIds=e=>{var r;return((null===(r=null==e?void 0:e.line_items)||void 0===r?void 0:r.data)||[]).map((({price:e})=>{var r;return null===(r=null==e?void 0:e.product)||void 0===r?void 0:r.id}))},getCartCouponIds=e=>{var r,o,t,s;return(null===(o=null===(r=null==e?void 0:e.discount)||void 0===r?void 0:r.coupon)||void 0===o?void 0:o.id)?[null===(s=null===(t=null==e?void 0:e.discount)||void 0===t?void 0:t.coupon)||void 0===s?void 0:s.id]:[]},compareObjectValues=(e,r,o)=>{switch(o){case"all":return r.filter((r=>e.some((e=>r==e)))).length===r.length;case"any":return e.filter((e=>r.some((r=>e==r)))).length>=1;case"none":return 0===e.filter((e=>r.some((r=>e==r)))).length;case"exist":return e.length>=1;case"not_exist":return 0===e.length;default:return!1}},compareNumberValues=(e,r,o)=>{switch(o){case"==":return e===r;case"!=":return e!==r;case">":return e>r;case"<":return e<r;case"<=":return e<=r;case">=":return e>=r}return!1},scConditionalFormCss=":host{display:block}",ScConditionalForm=class{constructor(e){registerInstance(this,e)}render(){var e,r;return e=this.rule_groups,r={checkout:currentCheckout(),processor:null==state?void 0:state.id},(e||[]).some((({rules:e})=>hasRulesPassed(e,r)))?h(Host,null,h("slot",null)):null}};ScConditionalForm.style=scConditionalFormCss;export{ScConditionalForm as sc_conditional_form};