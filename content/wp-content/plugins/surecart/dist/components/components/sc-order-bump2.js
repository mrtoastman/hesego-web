import{proxyCustomElement,HTMLElement,createEvent,h}from"@stencil/core/internal/client";import{a as isBumpInOrder}from"./index3.js";import{i as intervalString}from"./price.js";import{d as defineCustomElement$3}from"./sc-choice2.js";import{d as defineCustomElement$2}from"./sc-divider2.js";import{d as defineCustomElement$1}from"./sc-format-number2.js";const scOrderBumpCss=":host{display:block}.bump{display:grid;gap:1em}.bump__text{display:grid;gap:0.25em}.bump__tag{background:var(--sc-color-primary-500);color:var(--sc-color-white);border-radius:var(--sc-input-border-radius-medium);padding:var(--sc-spacing-x-small);font-size:var(--sc-font-size-x-small)}.bump__product{display:flex;align-items:center;gap:var(--sc-choice-padding, 1.3em 1.1em);line-height:var(--sc-line-height-dense)}.bump__product-title{font-weight:var(--sc-font-weight-semibold)}.bump__product-description{color:var(--sc-input-label-color)}.bump__image{width:var(--sc-product-line-item-image-size, 4em);height:var(--sc-product-line-item-image-size, 4em);flex:0 0 var(--sc-product-line-item-image-size, 4em);object-fit:cover;border-radius:4px;border:1px solid var(--sc-color-gray-200);display:block;box-shadow:var(--sc-input-box-shadow)}.bump__price--has-discount .bump__original-price{text-decoration:line-through;color:var(--sc-color-gray-500);font-size:var(--sc-font-size-small)}.bump__price .bump__new-price{font-size:var(--sc-font-size-large);color:var(--sc-color-gray-700)}.bump__price .bump__interval{color:var(--sc-color-gray-500)}.bump__amount{display:flex;align-items:center;gap:var(--sc-spacing-x-small);flex-wrap:wrap;margin-top:var(--sc-spacing-xx-small)}",ScOrderBump=proxyCustomElement(class extends HTMLElement{constructor(){super(),this.__registerHost(),this.__attachShadow(),this.scAddLineItem=createEvent(this,"scAddLineItem",7),this.scRemoveLineItem=createEvent(this,"scRemoveLineItem",7)}updateLineItem(e){var i,t,r;const o=(null===(i=this.bump.price)||void 0===i?void 0:i.id)||(null===(t=this.bump)||void 0===t?void 0:t.price);e?this.scAddLineItem.emit({bump:null===(r=this.bump)||void 0===r?void 0:r.id,price_id:o,quantity:1}):this.scRemoveLineItem.emit({price_id:o,quantity:1})}newPrice(){var e,i,t,r,o,s;let c=null,n=(null===(i=null===(e=this.bump)||void 0===e?void 0:e.price)||void 0===i?void 0:i.amount)||0;if((null===(t=this.bump)||void 0===t?void 0:t.amount_off)&&(c=Math.max(0,n-(null===(r=this.bump)||void 0===r?void 0:r.amount_off))),null===(o=this.bump)||void 0===o?void 0:o.percent_off){const e=n*((null===(s=this.bump)||void 0===s?void 0:s.percent_off)/100);c=Math.max(0,n-e)}return c}renderInterval(){var e;const i=intervalString(null===(e=this.bump)||void 0===e?void 0:e.price,{labels:{interval:"/",period:wp.i18n.__("for","surecart")}});return i.trim().length?h("span",{class:"bump__interval"},i):null}renderPrice(){var e,i,t,r,o,s,c;return h("div",{slot:"description",class:{bump__price:!0,"bump__price--has-discount":!!(null===(e=this.bump)||void 0===e?void 0:e.percent_off)||!!(null===(i=this.bump)||void 0===i?void 0:i.amount_off)},part:"price"},h("sc-format-number",{type:"currency",class:"bump__original-price",value:null===(r=null===(t=this.bump)||void 0===t?void 0:t.price)||void 0===r?void 0:r.amount,currency:null===(s=null===(o=this.bump)||void 0===o?void 0:o.price)||void 0===s?void 0:s.currency})," ",0===this.newPrice()&&wp.i18n.__("Free","surecart"),null!==this.newPrice()&&this.newPrice()>0&&h("sc-format-number",{type:"currency",class:"bump__new-price",value:this.newPrice(),currency:(null===(c=this.bump)||void 0===c?void 0:c.price).currency}),this.renderInterval())}renderDiscount(){var e,i,t,r,o;return(null===(e=this.bump)||void 0===e?void 0:e.amount_off)?h("div",{class:"bump__tag"},wp.i18n.__("Save","surecart")," ",h("sc-format-number",{type:"currency",value:-(null===(i=this.bump)||void 0===i?void 0:i.amount_off),currency:(null===(t=this.bump)||void 0===t?void 0:t.price).currency})):(null===(r=this.bump)||void 0===r?void 0:r.percent_off)?h("div",{class:"bump__tag"},wp.i18n.sprintf(wp.i18n.__("Save %s%%","surecart"),null===(o=this.bump)||void 0===o?void 0:o.percent_off)):void 0}render(){var e,i,t,r,o,s,c,n,u,d,l,m,a,p;const v=null===(i=null===(e=this.bump)||void 0===e?void 0:e.price)||void 0===i?void 0:i.product;return h("sc-choice",{value:null===(t=this.bump)||void 0===t?void 0:t.id,type:"checkbox",showControl:this.showControl,checked:isBumpInOrder(this.bump,this.checkout),onScChange:e=>this.updateLineItem(e.target.checked),exportparts:"base, control, checked-icon, title"},h("div",{part:"base-content",class:"bump"},h("div",{class:"bump__text"},h("div",{class:"bump__title"},(null===(o=null===(r=this.bump)||void 0===r?void 0:r.metadata)||void 0===o?void 0:o.cta)||(null===(s=this.bump)||void 0===s?void 0:s.name)||(null==v?void 0:v.name)),h("div",{class:"bump__amount"},this.renderPrice()," ",this.renderDiscount()))),(null===(n=null===(c=this.bump)||void 0===c?void 0:c.metadata)||void 0===n?void 0:n.description)&&h("div",{slot:"footer"},h("sc-divider",{style:{"--spacing":"var(--sc-spacing-medium)"}}),h("div",{class:"bump__product"},!!(null==v?void 0:v.image_url)&&h("img",{src:v.image_url,class:"bump__image"}),h("div",{class:"bump__product-text"},!!(null===(d=null===(u=this.bump)||void 0===u?void 0:u.metadata)||void 0===d?void 0:d.cta)&&h("div",{class:"bump__product-title"},this.bump.name||(null==v?void 0:v.name)),!!(null===(m=null===(l=this.bump)||void 0===l?void 0:l.metadata)||void 0===m?void 0:m.description)&&h("div",{class:"bump__product-description"},null===(p=null===(a=this.bump)||void 0===a?void 0:a.metadata)||void 0===p?void 0:p.description)))))}static get style(){return scOrderBumpCss}},[1,"sc-order-bump",{bump:[16],checkout:[16],showControl:[516,"show-control"]}]);function defineCustomElement(){"undefined"!=typeof customElements&&["sc-order-bump","sc-choice","sc-divider","sc-format-number"].forEach((e=>{switch(e){case"sc-order-bump":customElements.get(e)||customElements.define(e,ScOrderBump);break;case"sc-choice":customElements.get(e)||defineCustomElement$3();break;case"sc-divider":customElements.get(e)||defineCustomElement$2();break;case"sc-format-number":customElements.get(e)||defineCustomElement$1()}}))}defineCustomElement();export{ScOrderBump as S,defineCustomElement as d};