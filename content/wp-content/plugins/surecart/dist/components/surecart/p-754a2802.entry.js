import{r as i,h as o}from"./p-dfbe004d.js";import{a as t}from"./p-d8453138.js";import{U as s}from"./p-c7dd942d.js";import{g as r}from"./p-4d73f82a.js";import{a as n}from"./p-1c2e2695.js";const e=class{constructor(o){i(this,o),this.loading=!1}componentWillLoad(){s.create(this,this.state()),this.getSession()}getSessionId(){var o;return(null===(o=this.order)||void 0===o?void 0:o.id)?this.order.id:r(window.location.href,"order")}async getSession(){var o;if(this.getSessionId()&&!(null===(o=this.order)||void 0===o?void 0:o.id))try{this.loading=!0,this.order=await await t({path:n(`surecart/v1/checkouts/${this.getSessionId()}`,{expand:["line_items","line_item.price","line_item.fees","price.product","customer","customer.shipping_address","payment_intent","discount","manual_payment_method","discount.promotion","billing_address","shipping_address"],refresh_status:!0})})}catch(o){this.error=(null==o?void 0:o.message)?o.message:wp.i18n.__("Something went wrong","surecart")}finally{this.loading=!1}}state(){var o,i;const t=null===(o=this.order)||void 0===o?void 0:o.manual_payment_method;return{processor:"stripe",loading:this.loading,orderId:this.getSessionId(),order:this.order,customer:null===(i=this.order)||void 0===i?void 0:i.customer,manualPaymentTitle:null==t?void 0:t.name,manualPaymentInstructions:null==t?void 0:t.instructions}}renderOnHold(){var i,t,r;return"processing"!==(null===(i=this.order)||void 0===i?void 0:i.status)?null:"paypal"===(null===(r=null===(t=null==this?void 0:this.order)||void 0===t?void 0:t.payment_intent)||void 0===r?void 0:r.processor_type)?o("sc-alert",{type:"warning",open:!0},wp.i18n.__("Paypal is taking a closer look at this payment. Itâ€™s required for some payments and normally takes up to 3 business days.","surecart")):void 0}renderManualInstructions(){var i;const t=null===(i=this.order)||void 0===i?void 0:i.manual_payment_method;if(null==t?void 0:t.instructions)return o("sc-alert",{type:"info",open:!0},o("span",{slot:"title"},null==t?void 0:t.name),null==t?void 0:t.instructions)}render(){var i,t;return o(s.Provider,{state:this.state()},o("div",{class:{"order-confirmation":!0}},o("div",{class:{"order-confirmation__content":!0,hidden:!(null===(i=this.order)||void 0===i?void 0:i.id)&&!this.loading}},o("sc-order-confirm-components-validator",{checkout:this.order},o("slot",null))),!(null===(t=this.order)||void 0===t?void 0:t.id)&&!this.loading&&o("sc-heading",null,wp.i18n.__("Order not found.","surecart"),o("span",{slot:"description"},wp.i18n.__("This order could not be found. Please try again.","surecart")))))}};e.style=":host{display:block;max-width:800px;margin:auto}::slotted(*:not(:last-child)),sc-form form>*:not(:last-child){margin-bottom:var(--sc-form-row-spacing-large)}.order-confirmation__content{color:var(--sc-order-confirmation-color, var(--sc-color-gray-500))}.order-confirmation__content.hidden{display:none}::part(line-items){display:grid;gap:0.5em}";export{e as sc_order_confirmation};