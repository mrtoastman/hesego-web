"use strict";class FormSubmitController{constructor(t,e){this.form=null,this.input=t,this.options={form:t=>{var e,i;return(null===(i=null===(e=this.closestElement("sc-form",t))||void 0===e?void 0:e.shadowRoot)||void 0===i?void 0:i.querySelector("form"))||this.closestElement("form",t)},name:t=>t.name,value:t=>t.value,disabled:t=>t.disabled,...e},this.form=this.options.form(this.input),this.handleFormData=this.handleFormData.bind(this)}closestElement(t,e){return e?e&&e!=document&&e!=window&&e.closest(t)||this.closestElement(t,e.getRootNode().host):null}addFormData(){this.form&&this.form.addEventListener("formdata",this.handleFormData)}removeFormData(){this.form&&this.form.removeEventListener("formdata",this.handleFormData)}handleFormData(t){const e=this.options.name(this.input),i=this.options.value(this.input);"string"==typeof e&&void 0!==i&&(Array.isArray(i)?i.forEach((i=>{i&&t.formData.append(e,i.toString())})):i&&t.formData.append(e,i.toString()))}}const parseFormData=t=>{var e;const{email:i,name:o,first_name:r,last_name:n,password:s,shipping_city:a,shipping_country:l,shipping_line_1:m,shipping_line_2:d,shipping_postal_code:p,shipping_state:h,billing_city:c,billing_country:_,billing_line_1:u,billing_line_2:f,billing_postal_code:y,billing_state:g,"tax_identifier.number_type":b,"tax_identifier.number":v,...F}=t,D={...a?{city:a}:{},...l?{country:l}:{},...m?{line_1:m}:{},...d?{line_2:d}:{},...p?{postal_code:p}:{},...h?{state:h}:{}},w={...c?{city:c}:{},..._?{country:_}:{},...u?{line_1:u}:{},...f?{line_2:f}:{},...y?{postal_code:y}:{},...g?{state:g}:{}};return{...o?{name:o}:{},...i?{email:i}:{},...r?{first_name:r}:{},...n?{last_name:n}:{},...s?{password:s}:{},...Object.keys(D||{}).length?{shipping_address:D}:{},...Object.keys(w||{}).length?{billing_address:w}:{},...b&&v?{tax_identifier:{number:v,number_type:b}}:{},...(null===(e=Object.keys(F))||void 0===e?void 0:e.length)?{metadata:F}:{}}},reportChildrenValidity=async t=>{const e=[...t.shadowRoot.querySelectorAll("*")].filter((t=>"function"==typeof t.reportValidity));for(const t of e)if(!await t.reportValidity())return!1;return!0};exports.FormSubmitController=FormSubmitController,exports.parseFormData=parseFormData,exports.reportChildrenValidity=reportChildrenValidity;