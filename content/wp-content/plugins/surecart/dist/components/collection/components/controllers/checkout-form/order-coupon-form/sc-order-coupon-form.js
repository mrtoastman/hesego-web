import{Component,State,h,Watch,Prop,Event}from"@stencil/core";import{openWormhole}from"stencil-wormhole";import{__}from"@wordpress/i18n";import{isRtl}from"../../../../functions/page-align";export class ScOrderCouponForm{handleErrorsChange(){var e;const o=((null===(e=null==this?void 0:this.error)||void 0===e?void 0:e.additional_errors)||[]).find((e=>{var o;return"discount.promotion_code"===(null===(o=null==e?void 0:e.data)||void 0===o?void 0:o.attribute)}));this.errorMessage=(null==o?void 0:o.message)?null==o?void 0:o.message:""}render(){var e,o,r,t,l,s;return h("sc-coupon-form",{label:this.label||__("Add Coupon Code","surecart"),collapsed:this.collapsed,placeholder:this.placeholder,loading:this.busy&&!(null===(r=null===(o=null===(e=this.order)||void 0===e?void 0:e.line_items)||void 0===o?void 0:o.data)||void 0===r?void 0:r.length),busy:this.busy,error:this.errorMessage,discount:null===(t=null==this?void 0:this.order)||void 0===t?void 0:t.discount,currency:null===(l=null==this?void 0:this.order)||void 0===l?void 0:l.currency,"discount-amount":null===(s=null==this?void 0:this.order)||void 0===s?void 0:s.discount_amount,class:{"order-coupon-form--is-rtl":isRtl()},"button-text":this.buttonText||__("Apply","surecart")})}static get is(){return"sc-order-coupon-form"}static get encapsulation(){return"shadow"}static get originalStyleUrls(){return{$:["sc-order-coupon-form.scss"]}}static get styleUrls(){return{$:["sc-order-coupon-form.css"]}}static get properties(){return{label:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"label",reflect:!1},loading:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"loading",reflect:!1},busy:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"busy",reflect:!1},error:{type:"any",mutable:!1,complexType:{original:"any",resolved:"any",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"error",reflect:!1},order:{type:"unknown",mutable:!1,complexType:{original:"Checkout",resolved:"Checkout",references:{Checkout:{location:"import",path:"../../../../types"}}},required:!1,optional:!1,docs:{tags:[],text:""}},collapsed:{type:"boolean",mutable:!1,complexType:{original:"boolean",resolved:"boolean",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"collapsed",reflect:!1},placeholder:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"placeholder",reflect:!1},buttonText:{type:"string",mutable:!1,complexType:{original:"string",resolved:"string",references:{}},required:!1,optional:!1,docs:{tags:[],text:""},attribute:"button-text",reflect:!1}}}static get states(){return{open:{},value:{},errorMessage:{}}}static get events(){return[{method:"scApplyCoupon",name:"scApplyCoupon",bubbles:!0,cancelable:!0,composed:!0,docs:{tags:[],text:""},complexType:{original:"string",resolved:"string",references:{}}}]}static get watchers(){return[{propName:"error",methodName:"handleErrorsChange"}]}}openWormhole(ScOrderCouponForm,["loading","busy","order","error"],!1);